{% extends 'posts/base.html' %}
{% load static %}

{% block content %}

<section class="section-padding">
    <div class="container">
        <div class="row">
            {% for post in latest_posts %}
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="category-item">
                    <div class="category-img">
                        <a href="{% url 'post_detail' post.slug %}"><img src="{{ post.image.url }}" alt="" class="img-fluid w-100"></a>
                    </div>
                    <div class="content">
                        <a href="#" class="text-color text-uppercase font-sm letter-spacing font-extra">{{ post.category|upper }}</a>
                        <h4><a href="{% url 'post_detail' post.slug %}">{{ post.title|title }}</a></h4>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="section-padding pt-4">
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <div class="subscribe-home py-4 px-4 mb-5 bg-grey">

                    <form action="{% url 'home' %}" method="post">
                    {% csrf_token %}

                    <div class="form-group row align-items-center mb-0">
                        <label for="colFormLabel" class="col-form-label col-sm-12 h4 col-lg-4">Subscribe for Newsletter</label>
                        <div class="col-sm-6 col-lg-3">
                            {{ form.name }}
                        </div>
                        <div class="col-sm-6 col-lg-3">
                            {{ form.email }}
                        </div>
                        <div class="col-sm-2">
                            <button type="submit" class="btn btn-dark">Subscribe</button>
                        </div>
                    </div>

                    </form>

                </div>
            </div>
        </div>

        <div class="row">
				<div class="col-lg-8 col-md-12 col-sm-12 col-xs-12">
                {% for post in posts %}
					<div class="mb-4 post-list border-bottom pb-4">
						<div class="row no-gutters">
							<div class="col-md-5">
								<a class="post-thumb " href="{% url 'post_detail' post.slug %}">
									<img src="{{ post.image.url }}" alt="" class="img-fluid w-100">
								</a>
							</div>

							<div class="col-md-7">
								<div class="post-article mt-sm-3">
									<div class="meta-cat">
										<span class="letter-spacing cat-name font-extra text-uppercase font-sm">{{ post.category|upper }}</span>
									</div>
									<h3 class="post-title mt-2"><a href="{% url 'post_detail' post.slug %}">{{ post.title|title }}</a></h3>

									<div class="post-meta">
										<ul class="list-inline">
											<li class="post-like list-inline-item">
												<span class="font-sm letter-spacing-1 text-uppercase"><i class="ti-time mr-2"></i>{{ post.time_read }} min
													read</span>
											</li>
										</ul>
									</div>
									<div class="post-content">
										<p>{{ post.excerpt }}</p>
									</div>
								</div>
							</div>
						</div>
					</div>
                {% endfor %}

                <!-- Pagination block -->
                <div class="pagination mt-5 pt-4">
                    <ul class="list-inline">
                        {% for page in posts.paginator.page_range %}
                        <li class="list-inline-item">
                            <a href="?page={{ page }}" {% if page == posts.number %} class="active" {% endif %}>{{ page }}</a>
                        </li>
                        {% endfor %}
                        {% if posts.has_next %}
                        <li class="list-inline-item">
                            <a href="?page={{ posts.next_page_number }}" class="prev-posts">
                                <i class="ti-arrow-right"></i>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
                <!-- End pagination block -->

				</div>
				<div class="col-lg-4 col-md-8 col-sm-12 col-xs-12">
					<div class="sidebar sidebar-right">
						<div class="sidebar-wrap mt-5 mt-lg-0">
							<div class="sidebar-widget about mb-5 text-center p-3">
								<div class="about-author">
									<img src="{{ blog_author.photo.url }}" alt="" class="img-fluid">
								</div>
								<h4 class="mb-0 mt-4">{{ blog_author.name }}</h4>
								<p>Travel Blogger</p>
								<p>I'm Liam, last year I decided to quit my job and travel the world. You can follow my journey on this
									blog!</p>
								<img src="{% static 'images/liammason.png' %}" alt="" class="img-fluid">
							</div>

							<div class="sidebar-widget follow mb-5 text-center">
								<h4 class="text-center widget-title">Follow Me</h4>
								<div class="follow-socials">
									<a href="#"><i class="ti-facebook"></i></a>
									<a href="#"><i class="ti-twitter"></i></a>
									<a href="#"><i class="ti-instagram"></i></a>
									<a href="#"><i class="ti-youtube"></i></a>
									<a href="#"><i class="ti-pinterest"></i></a>
								</div>
							</div>

							<div class="sidebar-widget category mb-5">
								<h4 class="text-center widget-title">Catgeories</h4>
								<ul class="list-unstyled">
                                    {% for category in categories %}
									<li class="align-items-center d-flex justify-content-between">
										<a href="#">{{ category.name }}</a>
										<span>{{ category.count_posts }}</span>
									</li>
                                    {% endfor %}
								</ul>
							</div>

							<div class="sidebar-widget sidebar-adv mb-5">
								<a href="#"><img src="{% static 'images/sidebar-banner3.png' %}" alt="" class="img-fluid w-100"></a>
							</div>

						</div>
					</div>
				</div>
			</div>
    </div>
</section>

{% endblock %}